<html>
    <head>
        <title>Battery Monitor Watchface</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" />
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap-theme.min.css" />
        <script src="https://code.jquery.com/jquery.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>

        <script>
            function getQSParams()
            {
                var qs = location.search.replace( '?', '' ).split( '&' );
                var params = {};
                for ( var i = 0; i < qs.length; i++ )
                {
                    var p = qs[i].split( '=' );
                    params[p[0]] = p[1];
                }
                return params;
            }

            function getOption( key )
            {
                var e = document.getElementsByName( key );
                for( var i = 0; i < e.length; i++ )
                {
                    if( e[i].checked ) return e[i].value;
                }
                return "";
            }
            function saveOptions() 
            {
                var temp_units = getOption( 'temp_units' );
                var clock_format = getOption( 'clock_format' );
                var weather_interval = getOption( 'weather_interval' );

                var options = {
                    'temp_units': temp_units,
                    'clock_format': clock_format,
                    'weather_interval': weather_interval
                };
                return options;
            }

            $( document ).ready(
                function() 
                {
                    var params = getQSParams();
                    for ( var k in params )
                    {
                        document.getElementById( params[k] ).checked = true;
                    }
                }
            );

            function redirect() 
            {
                var location = "pebblejs://close#" + encodeURIComponent( JSON.stringify( saveOptions() ) );
                console.log( "redirect to " + location );
                document.location = location;
                return false;
            }
        </script>
    </head>
    <body>
        <div class="container">
            <h2>Battery Monitor Watchface</h2>
            <form role="form">
                <h3>Temperature Units</h3>
                <div class="radio"><label><input type="radio" name="temp_units" id="metric" value="metric" /> Metric</label></div>
                <div class="radio"><label><input type="radio" name="temp_units" id="imperial" value="imperial" /> Imperial</label></div>
                <h3>Clock Format</h3>
                <div class="radio"><label><input type="radio" name="clock_format" id="12h" value="12h" /> 12 Hour</label></div>
                <div class="radio"><label><input type="radio" name="clock_format" id="24h" value="24h" /> 24 Hour</label></div>
                <h3>Weather Interval</h3>
                <select name="clock_format">
                    <option class="radio" value="10">10 minutes</option>
                    <option class="radio" value="20">20 minutes</option>
                    <option class="radio" value="30">30 minutes</option>
                    <option class="radio" value="40">40 minutes</option>
                    <option class="radio" value="50">50 minutes</option>
                    <option class="radio" value="60">60 minutes</option>
                </select>
                <button class="btn btn-default" onclick="return redirect()">Submit</button>
            </form>
        </div>
    </body>
</html>
